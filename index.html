<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><title>Shadow Paws</title><style>*{margin:0;padding:0;box-sizing:border-box}body{background:linear-gradient(180deg,#1a1a2e 0,#16213e 100%);display:flex;justify-content:center;align-items:center;min-height:100vh;font-family:monospace;overflow:hidden;touch-action:none;padding:10px}canvas{background:#0f0f1e;border:2px solid #4a0080;box-shadow:0 0 30px rgba(147,51,234,.5),inset 0 0 20px rgba(147,51,234,.1);width:100%;height:auto;max-width:400px;display:block;transition:transform .1s ease-out,box-shadow .3s;border-radius:12px;cursor:crosshair}canvas:hover{box-shadow:0 0 40px rgba(147,51,234,.8),inset 0 0 20px rgba(147,51,234,.2)}#ui{position:absolute;top:10px;left:50%;transform:translateX(-50%);color:#fff;text-align:center;font-size:18px;text-shadow:2px 2px 4px rgba(0,0,0,.8);pointer-events:none;z-index:10;width:100%;max-width:400px}#mainMenu{display:block}#gameOver{display:none}#gameOver h2,#startScreen h1{color:#9333ea;margin-bottom:10px;font-size:24px;text-shadow:2px 2px 4px rgba(147,51,234,.5)}#startScreen h1{font-size:28px}#gameOver p,#startScreen p{margin:10px 0;font-size:14px;color:#ccc;line-height:1.5}#gameOver button,#startScreen button{background:#9333ea;color:#fff;border:none;padding:12px 30px;font-size:18px;border-radius:8px;cursor:pointer;margin-top:15px;font-family:monospace;touch-action:manipulation;transition:transform .1s,background-color .2s}#gameOver button:hover,#startScreen button:hover{background-color:#a855f7}#gameOver button:active,#startScreen button:active{transform:scale(.95)}.controls{margin-top:15px;padding-top:15px;border-top:1px solid #444}.controls h3{color:#9333ea;margin-bottom:8px;font-size:16px}.menu-screen{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.95);padding:20px;border-radius:15px;text-align:center;color:#fff;border:2px solid #9333ea;z-index:100;max-width:90%;width:400px;max-height:80vh;overflow-y:auto;box-shadow:0 0 25px rgba(147,51,234,.7);transition:opacity .3s,transform .3s}.menu-screen.hidden{opacity:0;transform:translate(-50%,-50%) scale(.9);pointer-events:none}.menu-screen.show{opacity:1;transform:translate(-50%,-50%) scale(1);pointer-events:all}.menu-screen h1,.menu-screen h2{color:#9333ea;margin-bottom:15px;font-size:28px;text-shadow:2px 2px 4px rgba(147,51,234,.5)}.menu-screen h2{font-size:24px}.menu-screen h3{color:#a855f7;font-size:18px;margin-bottom:10px}.subtitle{color:#888;font-style:italic;margin-bottom:20px}.menu-btn{background:#9333ea;color:#fff;border:none;padding:12px 24px;font-size:16px;border-radius:8px;cursor:pointer;margin:5px;font-family:monospace;font-weight:700;touch-action:manipulation;transition:.2s;min-width:140px}.menu-btn:hover{background-color:#a855f7;transform:translateY(-2px);box-shadow:0 4px 12px rgba(147,51,234,.4)}.menu-btn:active{transform:translateY(0);box-shadow:0 2px 6px rgba(147,51,234,.3)}.menu-btn.primary{background:linear-gradient(135deg,#9333ea,#c084fc);font-size:18px;padding:15px 30px}.menu-btn.back-btn{background:#4b5563;margin-top:20px}.menu-btn.back-btn:hover{background:#6b7280}.menu-btn.danger{background:#dc2626}.menu-btn.danger:hover{background:#ef4444}.menu-btn.small{padding:8px 16px;font-size:14px;min-width:80px}.menu-buttons{display:flex;flex-direction:column;gap:10px;margin-top:20px}.mode-btn{text-align:left;padding:15px 20px;background:rgba(147,51,234,.1);border:2px solid #9333ea}.mode-btn:hover{background:rgba(147,51,234,.2)}.mode-title{font-size:18px;font-weight:700;margin-bottom:5px}.mode-desc{font-size:12px;color:#aaa;font-weight:400}.tutorial-content{margin:20px 0}.tutorial-step{display:none;padding:20px;background:rgba(147,51,234,.1);border-radius:10px;margin:10px 0}.tutorial-step.active{display:block}.tutorial-visual{font-size:48px;margin:15px 0}.tutorial-controls{display:flex;justify-content:space-between;align-items:center;margin:20px 0}.achievements-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:15px;margin:20px 0}.achievement-card{background:rgba(147,51,234,.1);border:2px solid #4b5563;border-radius:10px;padding:15px 10px;text-align:center;transition:.3s}.achievement-card.unlocked{border-color:#9333ea;background:rgba(147,51,234,.2)}.achievement-icon{font-size:24px;margin-bottom:8px;filter:grayscale(1);transition:filter .3s}.achievement-card.unlocked .achievement-icon{filter:grayscale(0)}.achievement-name{font-size:12px;font-weight:700;margin-bottom:4px}.achievement-desc{font-size:10px;color:#888;line-height:1.2}.stats-content{margin:20px 0}.stats-section{background:rgba(147,51,234,.1);border-radius:10px;padding:15px;margin:15px 0}.stat-item,.stat-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid rgba(255,255,255,.1)}.stat-item:last-child,.stat-row:last-child{border-bottom:none}.game-over-stats{background:rgba(147,51,234,.1);border-radius:10px;padding:15px;margin:15px 0}.new-achievements{background:rgba(34,197,94,.1);border:2px solid #22c55e;border-radius:10px;padding:15px;margin:15px 0}.settings-content{margin:20px 0}.setting-group{background:rgba(147,51,234,.1);border-radius:10px;padding:15px;margin:15px 0;text-align:left}.setting-item{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid rgba(255,255,255,.1)}.setting-item:last-child{border-bottom:none}.setting-item input[type=checkbox]{display:none}.toggle-slider{width:50px;height:26px;background:#4b5563;border-radius:13px;position:relative;cursor:pointer;transition:background .3s}.toggle-slider::before{content:'';position:absolute;width:22px;height:22px;background:#fff;border-radius:50%;top:2px;left:2px;transition:transform .3s}input[type=checkbox]:checked+.toggle-slider{background:#9333ea}input[type=checkbox]:checked+.toggle-slider::before{transform:translateX(24px)}@media (max-width:480px){canvas{max-width:95vw;max-height:70vh;cursor:none}.menu-screen{width:95vw;padding:15px;max-height:90vh}.menu-btn{padding:15px 20px;font-size:14px;min-width:120px}.achievements-grid{grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:10px}.tutorial-visual{font-size:36px}}</style></head><body><div id=ui><div>Score: <span id=score>0</span> | Lives: <span id=lives>9</span> | Level: <span id=level>1</span></div><div style=font-size:14px;margin-top:5px>Combo: <span id=combo>0</span>x | Best: <span id=highScore>0</span></div><div id=eventStatus style=font-size:12px;margin-top:3px;color:#ff0></div></div><div id=mainMenu class=menu-screen><h1>🐈‍⬛ Shadow Paws</h1><p class=subtitle>A black cat's superstitious adventure</p><div class=menu-buttons><button id=playButton class="menu-btn primary">🎮 PLAY</button> <button id=tutorialButton class=menu-btn>📖 TUTORIAL</button> <button id=achievementsButton class=menu-btn>🏆 ACHIEVEMENTS</button> <button id=statsButton class=menu-btn>📊 STATS</button> <button id=settingsButton class=menu-btn>⚙️ SETTINGS</button></div></div><div id=playMenu class="menu-screen hidden"><h2>🎮 Select Game Mode</h2><div class=menu-buttons><button id=endlessButton class="menu-btn mode-btn"><div class=mode-title>♾️ ENDLESS</div><div class=mode-desc>Classic arcade survival</div></button> <button id=storyButton class="menu-btn mode-btn"><div class=mode-title>📚 STORY</div><div class=mode-desc>Structured level progression</div></button> <button id=challengeButton class="menu-btn mode-btn"><div class=mode-title>⚡ CHALLENGE</div><div class=mode-desc>Daily special challenges</div></button></div><button id=backToMainButton class="menu-btn back-btn">← BACK</button></div><div id=tutorialScreen class="menu-screen hidden"><h2>📖 How to Play</h2><div class=tutorial-content><div class="tutorial-step active" id=tutStep1><h3>🐱 Meet Your Cat</h3><p>You're a black cat with a mysterious destiny!</p><div class=tutorial-visual>🐈‍⬛</div></div><div class=tutorial-step id=tutStep2><h3>🎯 Collect Good Items</h3><p><strong>🐟 Fish (10pts)</strong> • <strong>⭐ Stars (20pts)</strong> • <strong>🌙 Moon (30pts)</strong></p></div><div class=tutorial-step id=tutStep3><h3>⚠️ Avoid Bad Luck</h3><p><strong>🪞 Mirrors</strong> • <strong>🪜 Ladders</strong> • <strong>🧂 Salt</strong> lose lives!</p></div><div class=tutorial-step id=tutStep4><h3>✨ Special Items</h3><p><strong>🍀 Clover:</strong> Invincibility<br><strong>🐾 Pounce:</strong> Speed boost<br><strong>👁️ Night Vision:</strong> Slow time<br><strong>💜 Extra Life:</strong> Bonus life</p></div><div class=tutorial-step id=tutStep5><h3>🎮 Controls</h3><p><strong>Desktop:</strong> Arrow keys/WASD + Mouse<br><strong>Mobile:</strong> Touch and drag</p></div></div><div class=tutorial-controls><button id=tutPrevButton class="menu-btn small">← Prev</button> <span id=tutorialProgress>1/5</span> <button id=tutNextButton class="menu-btn small">Next →</button></div><button id=backToMainFromTutorial class="menu-btn back-btn">← BACK</button></div><div id=achievementsScreen class="menu-screen hidden"><h2>🏆 Achievements</h2><div class=achievements-grid id=achievementsList></div><button id=backToMainFromAchievements class="menu-btn back-btn">← BACK</button></div><div id=statsScreen class="menu-screen hidden"><h2>📊 Statistics</h2><div class=stats-content><div class=stats-section><h3>🎮 Game Stats</h3><div class=stat-item><span>Games Played:</span> <span id=statGamesPlayed>0</span></div><div class=stat-item><span>High Score:</span> <span id=statHighScore>0</span></div><div class=stat-item><span>Total Items:</span> <span id=statTotalItems>0</span></div><div class=stat-item><span>Best Combo:</span> <span id=statBestCombo>0</span></div></div><div class=stats-section><h3>📈 Performance</h3><div class=stat-item><span>Longest Streak:</span> <span id=statLongestStreak>0</span></div><div class=stat-item><span>Survival Time:</span> <span id=statSurvivalTime>0s</span></div><div class=stat-item><span>Achievements:</span> <span id=statAchievements>0/10</span></div></div></div><button id=resetStatsButton class="menu-btn danger">🗑️ Reset Stats</button> <button id=backToMainFromStats class="menu-btn back-btn">← BACK</button></div><div id=settingsScreen class="menu-screen hidden"><h2>⚙️ Settings</h2><div class=settings-content><div class=setting-group><h3>🔊 Audio</h3><label class=setting-item><span>Sound Effects:</span> <input type=checkbox id=soundToggle checked=checked> <span class=toggle-slider></span></label></div></div><button id=backToMainFromSettings class="menu-btn back-btn">← BACK</button></div><div id=gameOver class="menu-screen hidden"><h2>🏁 Game Over!</h2><div class=game-over-stats><div class=stat-row><span>Final Score:</span> <span id=finalScore>0</span></div><div class=stat-row><span>Level Reached:</span> <span id=finalLevel>1</span></div><div class=stat-row><span>Max Combo:</span> <span id=finalCombo>0</span>x</div><div class=stat-row><span>High Score:</span> <span id=finalHighScore>0</span></div></div><div id=newAchievements class="new-achievements hidden"><h3>🎉 New Achievements!</h3><div id=achievementNotifications></div></div><div class=menu-buttons><button id=playAgainButton class="menu-btn primary">🔄 PLAY AGAIN</button> <button id=backToMenuButton class=menu-btn>🏠 MAIN MENU</button></div></div><canvas id=game></canvas><script>const e=document.getElementById('game')
const t=e.getContext('2d')
const n=document.getElementById('score')
const o=document.getElementById('lives')
const i=document.getElementById('highScore')
const a=document.getElementById('combo')
const s=document.getElementById('level')
const l=document.getElementById('eventStatus')
const c=document.getElementById('mainMenu')
const r=document.getElementById('playMenu')
const d=document.getElementById('tutorialScreen')
const m=document.getElementById('achievementsScreen')
const f=document.getElementById('statsScreen')
const h=document.getElementById('settingsScreen')
const u=document.getElementById('gameOver')
const g=c
const y=document.getElementById('endlessButton')
const p=document.getElementById('playAgainButton')
const v=document.getElementById('finalScore')
const M=document.getElementById('finalLevel')
const b=document.getElementById('finalCombo')
const x=document.getElementById('finalHighScore')
e.width=400
e.height=600
let w=!1
let k='endless'
let L='main'
let E=0
let C=9
const B='shadowPaws2025_'
const I=e=>localStorage.getItem(B+e)
const z=(e,t)=>localStorage.setItem(B+e,t)
let S=I('high')||0
let T=!1
let P=0
let A=0
let $=0
let j=0
let D=1
let O=0
let X=1
let F=0
let V
let q=[]
let N={pounce:0,nightVision:0,nineLives:0}
let Y=!1
let R=0
let U=!1
let H=0
let G
let W=!0
let J=I('achievements')?JSON.parse(I('achievements')):{}
let _=parseInt(I('totalItems'))||0
let K=parseInt(I('totalGames'))||0
let Q=parseInt(I('longestStreak'))||0
let Z=0
const ee={x:e.width/2,y:e.height-100,size:30,speed:8,vx:0,vy:0,targetX:e.width/2,targetY:e.height-100,tail:[],eyeBlink:0,emotion:'neutral',purring:!1}
let te=[]
let ne=[]
let oe=[]
let ie=[]
let ae=[]
let se=[]
const le={fish:{emoji:'\ud83d\udc1f',points:10,good:!0,size:25},star:{emoji:'\u2b50',points:20,good:!0,size:25},moon:{emoji:'\ud83c\udf19',points:30,good:!0,size:25},mirror:{emoji:'\ud83e\ude9e',points:-1,good:!1,size:30},ladder:{emoji:'\ud83e\ude9c',points:-1,good:!1,size:35},salt:{emoji:'\ud83e\uddc2',points:-1,good:!1,size:25},clover:{emoji:'\ud83c\udf40',points:50,good:!0,special:!0,size:25},paw:{emoji:'\ud83d\udc3e',points:15,good:!0,powerUp:'pounce',size:25},eye:{emoji:'\ud83d\udc41\ufe0f',points:15,good:!0,powerUp:'nightVision',size:25},heart:{emoji:'\ud83d\udc9c',points:15,good:!0,powerUp:'nineLives',size:25}}
const ce={pounce:{duration:180,cooldown:600},nightVision:{duration:300,cooldown:900},nineLives:{duration:1,cooldown:1200}}
const re={firstSteps:{name:'First Steps',desc:'Collect your first item',icon:'\ud83d\udc76'},combo5:{name:'Combo Cat',desc:'Achieve a 5x combo',icon:'\ud83d\udd25'},combo25:{name:'Combo Master',desc:'Achieve a 25x combo',icon:'\u26a1'},combo50:{name:'Combo Legend',desc:'Achieve a 50x combo',icon:'\ud83c\udfc6'},level10:{name:'Persistent Cat',desc:'Reach level 10',icon:'\ud83c\udfaf'},survivor:{name:'Nine Lives',desc:'Survive with only 1 life',icon:'\ud83d\udc96'},collector:{name:'Item Hoarder',desc:'Collect 1000 total items',icon:'\ud83d\udce6'},veteran:{name:'Veteran Player',desc:'Play 100 games',icon:'\ud83c\udfae'},streaker:{name:'Lucky Cat',desc:'Get a 10 good item streak',icon:'\ud83c\udf40'},perfectionist:{name:'Perfectionist',desc:'Complete level without taking damage',icon:'\u2728'}}
const de={}
let me=!1
let fe=!1
let he={x:e.width/2,y:e.height-100}
document.addEventListener('keydown',e=>{const t=e.key.toLowerCase()
de[t]=!0
fe=!0
if(!w){if('escape'===t&&'main'!==L){Ze('main')
e.preventDefault()
return}}else{if(['arrowup','arrowdown','arrowleft','arrowright','w','a','s','d',' ','shift'].includes(t))e.preventDefault()
if('1'===t||'q'===t)ke('pounce')
if('2'===t||'e'===t)ke('nightVision')
if('3'===t||'r'===t)ke('nineLives')}})
document.addEventListener('keyup',e=>de[e.key.toLowerCase()]=!1)
const ue=e=>{e.preventDefault()
me=!0
pe(e)}
const ge=e=>{e.preventDefault()
if(!me)return
pe(e)}
const ye=e=>{e.preventDefault()
me=!1}
const pe=t=>{fe=!1
const n=t.touches?t.touches[0]:t
const o=e.getBoundingClientRect()
const i=(n.clientX-o.left)*(e.width/o.width)
const a=(n.clientY-o.top)*(e.height/o.height)
he.x=i
he.y=a
if(!fe){ee.targetX=i
ee.targetY=a}}
const ve=e=>{if(!me)pe(e)}
e.addEventListener('touchstart',ue)
e.addEventListener('touchmove',ge)
e.addEventListener('touchend',ye)
e.addEventListener('mousedown',ue)
e.addEventListener('mousemove',ve)
e.addEventListener('mouseup',ye)
e.addEventListener('mouseleave',ye)
function Me(){try{G=new(window.AudioContext||window.webkitAudioContext)}catch(e){W=!1}}function be(e,t,n=.1){if(!W||!G)return
const o=G.createOscillator()
const i=G.createGain()
o.connect(i)
i.connect(G.destination)
o.frequency.value=e
i.gain.value=n
i.gain.exponentialRampToValueAtTime(.01,G.currentTime+t)
o.start()
o.stop(G.currentTime+t)}function xe(){if(!W)return
for(let e=0;e<3;e++)setTimeout(()=>be(50+20*Math.random(),.3,.05),100*e)}function we(){for(let e=q.length-1;e>=0;e--){const t=q[e]
t.timer--
if(t.timer<=0)q.splice(e,1)}Object.keys(N).forEach(e=>{if(N[e]>0)N[e]--})}function ke(e){if(N[e]>0)return
const t=ce[e]
q.push({type:e,timer:t.duration})
N[e]=t.cooldown
if('nineLives'===e&&C<9){C++
Re(ee.x,ee.y,'#ff69b4',15)}be('pounce'===e?200:'nightVision'===e?400:600,.2)}function Le(e){return q.some(t=>t.type===e)}function Ee(e){if(J[e])return
J[e]=!0
z('achievements',JSON.stringify(J))
const t=re[e]
Ce(t.icon,t.name,t.desc)
be(800,.3,.15)
setTimeout(()=>be(1e3,.3,.1),150)}function Ce(t,n,o){for(let t=0;t<20;t++)Ue(e.width-100,50)
He()}function Be(){if(_>=1&&!J.firstSteps)Ee('firstSteps')
if(A>=5&&!J.combo5)Ee('combo5')
if(A>=25&&!J.combo25)Ee('combo25')
if(A>=50&&!J.combo50)Ee('combo50')
if(D>=10&&!J.level10)Ee('level10')
if(1===C&&D>3&&!J.survivor)Ee('survivor')
if(_>=1e3&&!J.collector)Ee('collector')
if(K>=100&&!J.veteran)Ee('veteran')
if(Z>=10&&!J.streaker)Ee('streaker')}function Ie(){if(Y&&--R<=0)Y=!1
if(U&&--H<=0)U=!1
if(Math.random()<5e-4)if(!Y&&Math.random()<.3){Y=!0
R=600
Ge()
be(100,1,.15)}else if(!U&&Math.random()<.2){U=!0
H=900
Ge()
be(300,1,.1)}}function ze(){let e=T?'#9333ea':'#2a2a2a'
if(Le('pounce'))e='#ff6b6b'
if(Le('nightVision'))e='#5fd3d3'
if(Le('nineLives'))e='#6bc5e8'
t.save()
t.translate(ee.x,ee.y)
const n=5*Math.sin(.008*Date.now())
t.strokeStyle=e
t.lineWidth=.15*ee.size
t.lineCap='round'
t.beginPath()
t.moveTo(.4*ee.size,.1*ee.size)
t.quadraticCurveTo(.8*ee.size,.4*ee.size+n,.6*ee.size,.9*ee.size)
t.stroke()
t.fillStyle=e
t.beginPath()
t.ellipse(0,0,.6*ee.size,.5*ee.size,0,0,2*Math.PI)
t.fill()
t.beginPath()
t.arc(0,.4*-ee.size,.45*ee.size,0,2*Math.PI)
t.fill()
t.beginPath()
t.moveTo(.15*-ee.size,.8*-ee.size)
t.quadraticCurveTo(.3*-ee.size,1.1*-ee.size,.45*-ee.size,.7*-ee.size)
t.closePath()
t.fill()
t.beginPath()
t.moveTo(.15*ee.size,.8*-ee.size)
t.quadraticCurveTo(.3*ee.size,1.1*-ee.size,.45*ee.size,.7*-ee.size)
t.closePath()
t.fill()
const o=.45*-ee.size
ee.eyeBlink=Math.max(0,ee.eyeBlink-1)
if(Math.random()<.002)ee.eyeBlink=6
if(0===ee.eyeBlink){t.fillStyle='#fff'
const e=.18*ee.size
const n=.09*ee.size
t.beginPath()
t.arc(-e,o,n,0,2*Math.PI)
t.arc(e,o,n,0,2*Math.PI)
t.fill()
t.fillStyle='#000'
const i=.05*ee.size
t.beginPath()
t.arc(-e,o,i,0,2*Math.PI)
t.arc(e,o,i,0,2*Math.PI)
t.fill()}else{t.strokeStyle='#2a2a2a'
t.lineWidth=.05*ee.size
t.lineCap='round'
const e=.18*ee.size
const n=.1*ee.size
t.beginPath()
t.moveTo(-e-n/2,o)
t.lineTo(-e+n/2,o)
t.stroke()
t.beginPath()
t.moveTo(e-n/2,o)
t.lineTo(e+n/2,o)
t.stroke()}t.fillStyle='#ff91a4'
t.beginPath()
const i=o+.1*ee.size
t.moveTo(0,i-.02*ee.size)
t.lineTo(.04*-ee.size,i+.03*ee.size)
t.lineTo(.04*ee.size,i+.03*ee.size)
t.closePath()
t.fill()
t.restore()
if(T){t.strokeStyle='#9333ea'
t.lineWidth=3
t.globalAlpha=.4*Math.sin(.008*Date.now())+.3
t.beginPath()
t.arc(ee.x,ee.y-.2*ee.size,1.1*ee.size,0,2*Math.PI)
t.stroke()
t.globalAlpha=1}}function Se(){t.font='25px serif'
te.forEach(e=>{t.save()
t.translate(e.x,e.y)
t.rotate(e.rotation)
if(U){const e=.3*Math.sin(.02*Date.now())+1
t.scale(e,e)}if(e.special||e.powerUp){const e=.2*Math.sin(.01*Date.now())+1
t.scale(e,e)}const n=Le('nightVision')&&e.y<100?.5:1
t.globalAlpha=n
t.shadowBlur=10
let o=e.good?e.special||e.powerUp?'#9333ea':'#0f0':'#f00'
if(Y)o=e.good?'#ff0':'#ff6600'
if(U)o='#ffffff'
t.shadowColor=o
t.fillText(e.emoji,-e.size/2,e.size/2)
t.restore()})
t.shadowBlur=0}function Te(){ne.forEach(e=>{t.fillStyle=e.color
t.globalAlpha=e.life/50
const n=e.size||4
if(e.life>20){t.shadowBlur=10
t.shadowColor=e.color}t.beginPath()
t.arc(e.x,e.y,n,0,2*Math.PI)
t.fill()
t.shadowBlur=0})
t.globalAlpha=1}function Pe(){for(let e=se.length-1;e>=0;e--){const t=se[e]
t.x+=t.vx
t.y+=t.vy
t.vx*=.99
t.vy*=.99
t.life--
if(t.life<=0)se.splice(e,1)}}function Ae(){se.forEach(e=>{const n=e.life/e.maxLife
t.globalAlpha=n
t.fillStyle=e.color
t.shadowBlur=15
t.shadowColor=e.color
for(let n=0;n<4;n++){const o=n/4*Math.PI*2+.01*Date.now()
const i=e.x+Math.cos(o)*e.size
const a=e.y+Math.sin(o)*e.size
t.beginPath()
t.arc(i,a,1,0,2*Math.PI)
t.fill()}t.shadowBlur=0})
t.globalAlpha=1}function $e(){for(let e=ae.length-1;e>=0;e--){ae[e].life--
if(ae[e].life<=0)ae.splice(e,1)}}function je(){if(ae.length>0){const n=ae[0]
t.fillStyle=`rgba(255, 255, 255, ${n.intensity})`
t.fillRect(0,0,e.width,e.height)}}function De(){for(let e=ie.length-1;e>=0;e--){const t=ie[e]
t.life--
t.alpha=t.life/60
if(t.life<=0)ie.splice(e,1)}}function Oe(){ie.forEach(e=>{t.globalAlpha=.4*e.alpha
t.fillStyle=Le('pounce')?'#ff6b6b':'#333'
t.font=`${e.size||12}px serif`
t.fillText('\ud83d\udc3e',e.x-(e.size||12)/2,e.y+4)})
t.globalAlpha=1}function Xe(){oe.forEach(n=>{n.y+=n.speed*X
if(n.y>e.height){n.y=0
n.x=Math.random()*e.width}let o='#fff'
if(Y)o='#ffaa00'
if(U)o='#aaeeff'
t.fillStyle=o
t.globalAlpha=.5*Math.random()+.5
const i=.5*Math.sin(.005*Date.now()+n.x)+1
const a=n.size*i
t.fillRect(n.x-a/2,n.y-a/2,a,a)})
t.globalAlpha=1}function Fe(){let t=ee.speed*(1+.1*D)
if(Le('pounce')){t*=1.8
ee.emotion='focused'}if(fe){if(de['arrowleft']||de['a']){ee.targetX-=t
ee.vx=Math.min(ee.vx-1,.3*-t)}if(de['arrowright']||de['d']){ee.targetX+=t
ee.vx=Math.max(ee.vx+1,.3*t)}if(de['arrowup']||de['w']){ee.targetY-=t
ee.vy=Math.min(ee.vy-1,.3*-t)}if(de['arrowdown']||de['s']){ee.targetY+=t
ee.vy=Math.max(ee.vy+1,.3*t)}}const n=ee.x,o=ee.y
if(fe){ee.x+=.8*ee.vx
ee.y+=.8*ee.vy
ee.vx*=.85
ee.vy*=.85}else{ee.vx=.25*(ee.targetX-ee.x)
ee.vy=.25*(ee.targetY-ee.y)
ee.x+=ee.vx
ee.y+=ee.vy}const i=Math.sqrt((ee.x-n)**2+(ee.y-o)**2)
if(i>2&&Math.random()<.3)ie.push({x:n,y:o,life:60,alpha:.8,size:12})
ee.x=Math.max(ee.size,Math.min(e.width-ee.size,ee.x))
ee.y=Math.max(ee.size,Math.min(e.height-ee.size,ee.y))
ee.targetX=Math.max(ee.size,Math.min(e.width-ee.size,ee.targetX))
ee.targetY=Math.max(ee.size,Math.min(e.height-ee.size,ee.targetY))
if(T&&--P<=0)T=!1
if($>0&&0===--$){A=0
We()}}function Ve(){for(let t=te.length-1;t>=0;t--){const n=te[t]
n.y+=n.speed*X
n.rotation+=.08
n.wobble+=n.wobbleSpeed
n.x+=.5*Math.sin(n.wobble)
const o=ee.x-n.x
const i=ee.y-n.y
const a=Math.sqrt(o*o+i*i)
if(a<ee.size/2+n.size/2){Ne(n)
te.splice(t,1)
We()}else if(n.y>e.height+30)te.splice(t,1)}}function qe(){for(let e=ne.length-1;e>=0;e--){const t=ne[e]
t.x+=t.vx
t.y+=t.vy
t.vy+=t.gravity||.3
t.vx*=.98
if(--t.life<=0)ne.splice(e,1)}}function Ne(t){if(t.good){A++
if(A>j)j=A
$=120
let e=1+Math.floor(A/5)
if(U)e*=2
if(Y)e*=1.5
E+=t.points*e
Re(t.x,t.y,A>5?'#ff0':'#0f0',Math.min(A,5))
if(A>15){be(880,.15,.08)
for(let e=0;e<8;e++)Ue(t.x,t.y)}else if(A>5)for(let e=0;e<3;e++)Ue(t.x,t.y)
if(t.powerUp){ke(t.powerUp)
for(let e=0;e<10;e++)Ue(t.x,t.y)
He()}if(A>10){xe()
ee.emotion='happy'
ee.purring=!0}else if(A>5)ee.emotion='happy'
else ee.emotion='neutral'
O++
_++
Z++
if(Z>Q){Q=Z
z('longestStreak',Q)}if(O>0&&O%12===0){D++
X=1+.1*(D-1)
Ge()
ft()
ht()
if(D%3===0&&C<9){C++
Re(ee.x,ee.y,'#ff69b4',20)}}z('totalItems',_)
Be()
if(t.special){T=!0
P=300
A+=5}}else{if(Le('pounce')){Re(t.x,t.y,'#ff6b6b',8)
E+=5
return}if(!T){C--
A=0
$=0
Z=0
ee.emotion='scared'
ee.purring=!1
setTimeout(()=>ee.emotion='neutral',2e3)
const n=Math.min(5+D,15)
e.style.transform=`translateX(${n}px)`
setTimeout(()=>e.style.transform=`translateX(-${n}px)`,50)
setTimeout(()=>e.style.transform='translateX(0)',100)
Re(t.x,t.y,'#f00',20)
be(150,.5,.2)
if(C<=0)_e()}else{Re(t.x,t.y,'#9333ea',8)
E+=5}}}function Ye(){let t=Math.max(.3,.7-.02*D)
if(Y)t=.2
const n=Math.random()<t
let o
if(n){const e=['fish','star','moon']
const t=['paw','eye','heart']
if(Math.random()<.04+(A>10?.02:0))o='clover'
else if(Math.random()<.08&&D>2)o=t[Math.floor(Math.random()*t.length)]
else o=e[Math.floor(Math.random()*e.length)]}else{const e=['mirror','ladder','salt']
o=e[Math.floor(Math.random()*e.length)]}const i=2.5+.25*D
te.push({type:o,x:Math.random()*(e.width-40)+20,y:-30,speed:i+1.5*Math.random(),rotation:0,wobble:Math.random()*Math.PI*2,wobbleSpeed:.1*Math.random()+.05,...le[o]})}function Re(e,t,n,o=10){for(let i=0;i<o;i++)ne.push({x:e,y:t,vx:8*(Math.random()-.5),vy:8*(Math.random()-.5),life:30+20*Math.random(),color:n,size:2+3*Math.random(),gravity:.1*Math.random()})}function Ue(e,t){se.push({x:e,y:t,vx:4*(Math.random()-.5),vy:4*(Math.random()-.5),life:80+40*Math.random(),maxLife:120,color:['#ff69b4','#9333ea','#00ffff','#ffd700'][Math.floor(4*Math.random())],size:1+2*Math.random()})}function He(){ae.push({life:8,intensity:.3*Math.random()+.2})}function Ge(){for(let e=0;e<50;e++){const t=e/50*Math.PI*2
ne.push({x:ee.x,y:ee.y,vx:Math.cos(t)*(5*Math.random()+2),vy:Math.sin(t)*(5*Math.random()+2),life:60,color:'#9333ea'})}}function We(){n.textContent=E
o.textContent=C
i.textContent=S
a.textContent=A
s.textContent=D
let e=''
if(Y)e+='\ud83d\udeab Friday 13th Mode! '
if(U)e+='\ud83c\udf15 Full Moon! '
if(q.length>0){const t=q.map(e=>'pounce'===e.type?'\ud83d\udc3e':'nightVision'===e.type?'\ud83d\udc41\ufe0f':'\ud83d\udc9c').join(' ')
e+=t}l.textContent=e
if(A>5){a.style.color='#ff0'
a.style.transform=`scale(${1+Math.min(A/50,.5)})`}else if(A>0){a.style.color='#0f0'
a.style.transform='scale(1)'}else{a.style.color='#fff'
a.style.transform='scale(1)'}}function Je(){if(w)return
clearInterval(V)
Ze('')
z('gameStartTime',Date.now())
w=!0
Qe()}function _e(){void 0
w=!1
K++
z('totalGames',K)
if(E>S){S=E
z('high',S)}const e=parseInt(I('bestCombo'))||0
if(j>e)z('bestCombo',j)
const t=Math.floor((Date.now()-(I('gameStartTime')||Date.now()))/1e3)
const n=parseInt(I('totalTime'))||0
z('totalTime',n+t)
const o={score:E,level:D,maxCombo:j,lives:C,itemsCollected:O,mode:k}
ut(o)
v.textContent=E
M.textContent=D
b.textContent=j
x.textContent=S
void 0
Ze('gameOver')}function Ke(){E=0
C=9
te=[]
ne=[]
T=!1
P=0
A=0
$=0
j=0
D=1
O=0
X=1
F=0
q=[]
N={pounce:0,nightVision:0,nineLives:0}
Y=!1
R=0
U=!1
H=0
ie=[]
ae=[]
se=[]
Z=0
ee.x=e.width/2
ee.y=e.height-100
ee.targetX=ee.x
ee.targetY=ee.y
ee.tail=[]
We()
u.style.display='none'
if(w)return
w=!0
Qe()}function Qe(){if(!w)return
let n=.25+Math.min(.02*D,.15)
let o='15, 15, 30'
if(Y){o='30, 10, 10'
n=.3}else if(U){o='20, 20, 35'
n=.2}t.fillStyle=`rgba(${o}, ${n})`
t.fillRect(0,0,e.width,e.height)
Ie()
we()
Pe()
$e()
je()
Xe()
De()
Oe()
Ae()
Fe()
ze()
Ve()
Se()
qe()
Te()
F++
const i=Math.max(25-2*D,6)
if(F%Math.floor(i)===0){Ye()
if(D>2&&Math.random()<.2+.05*D)setTimeout(Ye,100)
if(D>5&&Math.random()<.02*D)setTimeout(Ye,200)}if(A>0&&A%10===0&&$>118)for(let t=0;t<3;t++)setTimeout(()=>{const n={...le['star'],type:'star',x:Math.random()*(e.width-40)+20,y:-30-40*t,speed:4+.3*D,rotation:0,wobble:Math.random()*Math.PI*2,wobbleSpeed:.1}
te.push(n)},150*t)
requestAnimationFrame(Qe)}function Ze(e){void 0;[c,r,d,m,f,h,u].forEach(e=>{if(e){e.classList.add('hidden')
e.classList.remove('show')
e.style.display=''}})
let t
switch(e){case'main':t=c
break
case'play':t=r
break
case'tutorial':t=d
break
case'achievements':t=m
break
case'stats':t=f
break
case'settings':t=h
break
case'gameOver':t=u
break}if(t){t.classList.remove('hidden')
t.classList.add('show')
if('gameOver'===e)t.style.display='block'
L=e}}let et=1
function tt(){const e=document.querySelectorAll('.tutorial-step')
const t=document.getElementById('tutPrevButton')
const n=document.getElementById('tutNextButton')
const o=document.getElementById('tutorialProgress')
function i(){e.forEach((e,t)=>{e.classList.toggle('active',t===et-1)})
o.textContent=`${et}/${e.length}`
t.style.opacity=1===et?'0.5':'1'
n.style.opacity=et===e.length?'0.5':'1'}t.onclick=()=>{if(et>1){et--
i()}}
n.onclick=()=>{if(et<e.length){et++
i()}}
i()}function nt(){const e=document.getElementById('achievementsList')
if(!e)return
e.innerHTML=''
Object.keys(re).forEach(t=>{const n=re[t]
const o=document.createElement('div')
o.className=`achievement-card ${J[t]?'unlocked':''}`
o.innerHTML=`\n            <div class="achievement-icon">${n.icon}</div>\n            <div class="achievement-name">${n.name}</div>\n            <div class="achievement-desc">${n.desc}</div>\n        `
e.appendChild(o)})}function ot(){const e={statGamesPlayed:K,statHighScore:S,statTotalItems:_,statBestCombo:I('bestCombo')||0,statLongestStreak:Q,statSurvivalTime:it(parseInt(I('totalTime'))||0),statAchievements:`${Object.keys(J).length}/${Object.keys(re).length}`}
Object.entries(e).forEach(([e,t])=>{const n=document.getElementById(e)
if(n)n.textContent=t})}function it(e){const t=Math.floor(e/60)
const n=e%60
return`${t}m ${n}s`}function at(){W='false'!==I('audio')
const e=document.getElementById('soundToggle')
if(e){e.checked=W
e.onchange=()=>{W=e.checked
z('audio',W)}}}const st=[{theme:'Midnight Walk',badLuckMultiplier:1,goodLuckMultiplier:1,special:'normal'},{theme:'Friday 13th',badLuckMultiplier:2,goodLuckMultiplier:.5,special:'friday13th'},{theme:'Full Moon',badLuckMultiplier:.5,goodLuckMultiplier:2,special:'fullMoon'},{theme:'Black Cat Crossing',badLuckMultiplier:1.5,goodLuckMultiplier:1.5,special:'crossroads'},{theme:'Superstition City',badLuckMultiplier:2,goodLuckMultiplier:1,special:'cityscape'}]
const lt=[{name:'No Lives Lost',rule:'noLivesLost',description:'Complete 5 levels without losing a life',reward:500},{name:'Combo Master',rule:'comboTarget',target:20,description:'Achieve a 20x combo',reward:300},{name:'Speed Run',rule:'timeLimit',timeLimit:60,description:'Survive for 60 seconds',reward:400},{name:'Item Collector',rule:'itemTarget',target:50,description:'Collect 50 items',reward:350},{name:'Mirror Madness',rule:'avoidBadLuck',description:'Avoid all bad luck items for 30 seconds',reward:450}]
const ct={endless:{name:'Endless Mode',description:'Classic arcade survival - see how long you can last!',init:()=>{C=9
D=1
O=0
E=0
A=0
j=0
X=1
F=0}},story:{name:'Story Mode',description:'Progress through themed levels with unique challenges',currentStoryLevel:0,init:()=>{C=9
D=1
O=0
E=0
A=0
j=0
X=1
F=0
ct.story.currentStoryLevel=0
rt()}},challenge:{name:'Challenge Mode',description:'Daily challenges with special rules and rewards',currentChallenge:null,init:()=>{C=3
D=1
O=0
E=0
A=0
j=0
X=1
F=0
dt()}},tutorial:{name:'Interactive Tutorial',description:'Learn the game with guided practice',init:()=>{C=9
D=1
O=0
E=0
A=0
X=.5}}}
function rt(){const e=st[ct.story.currentStoryLevel%st.length]
l.textContent=`\ud83d\udcd6 Story: ${e.theme}`
switch(e.special){case'friday13th':Y=!0
R=1800
break
case'fullMoon':U=!0
H=1800
break}}function dt(){const e=(new Date).getDate()
const t=e%lt.length
const n=lt[t]
ct.challenge.currentChallenge=n
l.textContent=`\u26a1 Challenge: ${n.name}`
switch(n.rule){case'timeLimit':setTimeout(()=>{if('challenge'===k&&w){E+=n.reward
l.textContent=`\u2705 Challenge Complete! +${n.reward} points`}},1e3*n.timeLimit)
break}}function mt(e){k=e
const t=ct[e]
if(t){t.init()
Ze('')
Je()}}function ft(){if('story'===k&&D>3*(ct.story.currentStoryLevel+1)){ct.story.currentStoryLevel++
rt()
E+=200
l.textContent=`\ud83d\udcd6 Chapter Complete! Next: ${st[ct.story.currentStoryLevel%st.length].theme}`}}function ht(){if('challenge'!==k||!ct.challenge.currentChallenge)return
const e=ct.challenge.currentChallenge
switch(e.rule){case'noLivesLost':if(C<3){l.textContent=`\u274c Challenge Failed: Lives Lost`
return!1}break
case'comboTarget':if(j>=e.target){E+=e.reward
l.textContent=`\u2705 Challenge Complete! +${e.reward} points`
return!0}break
case'itemTarget':if(O>=e.target){E+=e.reward
l.textContent=`\u2705 Challenge Complete! +${e.reward} points`
return!0}break}return!1}function ut(e){const t=[]
if(!J.firstSteps&&e.itemsCollected>=1){J.firstSteps=!0
t.push('firstSteps')}if(!J.combo5&&e.maxCombo>=5){J.combo5=!0
t.push('combo5')}if(!J.combo25&&e.maxCombo>=25){J.combo25=!0
t.push('combo25')}if(!J.combo50&&e.maxCombo>=50){J.combo50=!0
t.push('combo50')}if(!J.level10&&e.level>=10){J.level10=!0
t.push('level10')}if(!J.survivor&&1===e.lives&&e.level>=5){J.survivor=!0
t.push('survivor')}if(!J.collector&&_>=1e3){J.collector=!0
t.push('collector')}if(!J.veteran&&K>=100){J.veteran=!0
t.push('veteran')}if(!J.streaker&&Q>=10){J.streaker=!0
t.push('streaker')}if(t.length>0){z('achievements',JSON.stringify(J))
gt(t)}}function gt(e){const t=document.getElementById('newAchievements')
const n=document.getElementById('achievementNotifications')
if(t&&n){n.innerHTML=e.map(e=>{const t=re[e]
return`<div class="achievement-notification">${t.icon} ${t.name}</div>`}).join('')
t.classList.remove('hidden')}}function yt(){document.getElementById('playButton')?.addEventListener('click',()=>Ze('play'))
document.getElementById('tutorialButton')?.addEventListener('click',()=>Ze('tutorial'))
document.getElementById('achievementsButton')?.addEventListener('click',()=>{Ze('achievements')
nt()})
document.getElementById('statsButton')?.addEventListener('click',()=>{Ze('stats')
ot()})
document.getElementById('settingsButton')?.addEventListener('click',()=>Ze('settings'))
document.getElementById('endlessButton')?.addEventListener('click',()=>mt('endless'))
document.getElementById('storyButton')?.addEventListener('click',()=>mt('story'))
document.getElementById('challengeButton')?.addEventListener('click',()=>mt('challenge'))
document.getElementById('backToMainButton')?.addEventListener('click',()=>Ze('main'))
document.getElementById('backToMainFromTutorial')?.addEventListener('click',()=>Ze('main'))
document.getElementById('backToMainFromAchievements')?.addEventListener('click',()=>Ze('main'))
document.getElementById('backToMainFromStats')?.addEventListener('click',()=>Ze('main'))
document.getElementById('backToMainFromSettings')?.addEventListener('click',()=>Ze('main'))
document.getElementById('playAgainButton')?.addEventListener('click',()=>mt(k))
document.getElementById('backToMenuButton')?.addEventListener('click',()=>Ze('main'))
document.getElementById('resetStatsButton')?.addEventListener('click',()=>{if(confirm('Are you sure you want to reset all stats? This cannot be undone.')){localStorage.clear()
location.reload()}})}function pt(){We()
Me()
for(let t=0;t<50;t++)oe.push({x:Math.random()*e.width,y:Math.random()*e.height,size:2*Math.random(),speed:.5*Math.random()+.1})
yt()
tt()
at()
nt()
ot()
Ze('main')
clearInterval(V)}document.addEventListener('DOMContentLoaded',pt)
</script></body></html>